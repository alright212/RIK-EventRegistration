@using EventRegistration.Application // Added to access EventViewModel
@{
    ViewData["Title"] = "Avaleht";
    var futureEvents = ViewBag.FutureEvents as IEnumerable<EventViewModel> ?? new List<EventViewModel>();
    var pastEvents = ViewBag.PastEvents as IEnumerable<EventViewModel> ?? new List<EventViewModel>();
}

<div class="container mt-4 mb-4">
    <!-- Top section: Info box and Image -->
    <div class="row mb-5 align-items-center">
        <div class="col-md-7">
            <div class="homepage-info-box p-4">
                <h1>Tere tulemast ürituste lehele!</h1>
                <p class="lead">Avasta põnevaid sündmusi ja halda oma osavõtte lihtsalt ja mugavalt.</p>
                <p>Siit leiad nii tulevasi kui ka juba toimunud üritusi. Loo uusi sündmusi, kutsu osalejaid ja pea järge kõige olulisema üle. Meie platvorm on loodud selleks, et ürituste korraldamine oleks sujuv ja nauditav kogemus.</p>
                <p>Kasuta navigeerimisriba, et lisada uus üritus või sirvida olemasolevaid. Küsimuste korral võta meiega julgelt ühendust!</p>
            </div>
        </div>
        <div class="col-md-5">
            <img src="~/images/pilt.jpg" alt="Ürituse illustratsioon" class="img-fluid rounded shadow-sm" />
        </div>
    </div>

    <!-- Bottom section: Event Lists -->
    <div class="row">
        <div class="col-md-6">
            <div class="events-list">
                <h2>Tulevased üritused</h2>
                @if (futureEvents.Any())
                {
                    <ul>
                        @foreach (var ev in futureEvents)
                        {
                            <li>
                                <div class="event-date-box">
                                    <span class="event-day">@ev.EventTime.ToString("dd")</span>
                                    <span class="event-month">@ev.EventTime.ToString("MMM").ToUpper()</span>
                                </div>
                                <div class="event-info">
                                    <a asp-controller="Events" asp-action="Details" asp-route-id="@ev.Id" class="event-name">@ev.Name</a>
                                    <p class="event-location">@ev.Location</p>
                                    <p class="event-participants">Osavõtjaid: @ev.ParticipantCount</p>
                                </div>
                                <div class="event-actions">
                                    <a asp-controller="Events" asp-action="Details" asp-route-id="@ev.Id">Osavõtjad</a>
                                    <a href="#" class="delete-icon"><img src="~/images/remove.png" alt="Kustuta" /></a>
                                </div>
                            </li>
                        }
                    </ul>
                }
                else
                {
                    <p>Tulevasi üritusi hetkel ei ole.</p>
                }
            </div>
        </div>

        <div class="col-md-6">
            <div class="events-list">
                <h2>Toimunud üritused</h2>
                @if (pastEvents.Any())
                {
                    <ul>
                        @foreach (var ev in pastEvents)
                        {
                            <li>
                                <div class="event-date-box">
                                    <span class="event-day">@ev.EventTime.ToString("dd")</span>
                                    <span class="event-month">@ev.EventTime.ToString("MMM").ToUpper()</span>
                                </div>
                                <div class="event-info">
                                    <span class="event-name">@ev.Name</span> @* Past events are not clickable to details in the same way by default, adjust if needed *@
                                    <p class="event-location">@ev.Location</p>
                                    <p class="event-participants">Osavõtjaid: @ev.ParticipantCount</p>
                                </div>
                                <div class="event-actions">
                                    <a asp-controller="Events" asp-action="Details" asp-route-id="@ev.Id">Osavõtjad</a>
                                </div>
                            </li>
                        }
                    </ul>
                }
                else
                {
                    <p>Toimunud üritusi hetkel ei ole.</p>
                }
            </div>
        </div>
    </div>
</div>